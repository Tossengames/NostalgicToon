<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sound Test Fixed</title>
<style>
  body { display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; background:#222; color:#fff; font-family:sans-serif; }
  button { font-size:2rem; padding:30px 60px; margin:10px; cursor:pointer; }
  #feedback { margin-top:20px; font-size:1rem; color:#0f0; }
</style>
</head>
<body>

<button id="btnClick">CLICK ME (Programmatic)</button>
<button id="btnMP3">Play MP3</button>
<button id="btnEnable">Enable Sound ðŸ”Š</button>
<div id="feedback">Feedback here...</div>

<script>
let audioEnabled = false;

// Web Audio setup
const context = new (window.AudioContext || window.webkitAudioContext)();
let mp3Audio = new Audio('sfx.mp3'); // <-- Put a real local mp3 file in the same folder
mp3Audio.loop = false;

const feedback = document.getElementById('feedback');

function log(msg) {
  feedback.textContent = msg;
  console.log(msg);
}

// Enable sound
document.getElementById('btnEnable').addEventListener('click', async () => {
    if (context.state === 'suspended') {
        await context.resume();
    }
    audioEnabled = true;
    log('Audio Enabled!');
});

// Programmatic oscillator
document.getElementById('btnClick').addEventListener('click', () => {
    if (!audioEnabled) { log('Enable sound first!'); return; }

    const osc = context.createOscillator();
    const gainNode = context.createGain();
    gainNode.gain.value = 0.5;

    osc.connect(gainNode);
    gainNode.connect(context.destination);

    osc.type = 'sine';
    osc.frequency.value = 440;

    osc.start();
    osc.stop(context.currentTime + 0.5);

    log('Programmatic sound played!');
});

// Play MP3
document.getElementById('btnMP3').addEventListener('click', () => {
    if (!audioEnabled) { log('Enable sound first!'); return; }

    mp3Audio.currentTime = 0;
    mp3Audio.play().then(() => {
        log('MP3 sound playing!');
    }).catch(err => {
        log('MP3 failed: ' + err);
    });
});
</script>

</body>
</html>