<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sound Test</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    font-family: sans-serif;
    background: #222;
    color: #fff;
  }
  #btnClick {
    font-size: 2rem;
    padding: 30px 60px;
    margin: 20px;
    cursor: pointer;
  }
  #btnToggle {
    font-size: 1.2rem;
    padding: 15px 30px;
    margin: 10px;
    cursor: pointer;
  }
  #btnMP3 {
    font-size: 1.2rem;
    padding: 15px 30px;
    margin: 10px;
    cursor: pointer;
  }
  #feedback {
    margin-top: 20px;
    font-size: 1rem;
    color: #0f0;
  }
</style>
</head>
<body>

<button id="btnClick">CLICK ME</button>
<button id="btnToggle">Enable Sound ðŸ”Š</button>
<button id="btnMP3">Play MP3</button>

<div id="feedback">Feedback here...</div>

<script>
let audioEnabled = false;

// Web Audio API setup
const context = new (window.AudioContext || window.webkitAudioContext)();
let mp3Audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3');
mp3Audio.crossOrigin = "anonymous";

const feedback = document.getElementById('feedback');

function logFeedback(msg) {
  feedback.textContent = msg;
  console.log(msg);
}

// Enable/disable audio
document.getElementById('btnToggle').addEventListener('click', () => {
  if (!audioEnabled) {
    if (context.state === 'suspended') context.resume();
    audioEnabled = true;
    document.getElementById('btnToggle').textContent = 'Disable Sound ðŸ”‡';
    logFeedback('Audio Enabled');
  } else {
    audioEnabled = false;
    document.getElementById('btnToggle').textContent = 'Enable Sound ðŸ”Š';
    logFeedback('Audio Disabled');
  }
});

// Programmatic sound
document.getElementById('btnClick').addEventListener('click', () => {
  if (!audioEnabled) {
    logFeedback('Audio is disabled. Click "Enable Sound" first.');
    return;
  }

  const oscillator = context.createOscillator();
  oscillator.type = 'sine';
  oscillator.frequency.setValueAtTime(440, context.currentTime);

  const gainNode = context.createGain();
  gainNode.gain.setValueAtTime(0.5, context.currentTime);

  oscillator.connect(gainNode);
  gainNode.connect(context.destination);
  oscillator.start();
  oscillator.stop(context.currentTime + 0.5);

  logFeedback('Programmatic sound played!');
});

// MP3 sound
document.getElementById('btnMP3').addEventListener('click', () => {
  if (!audioEnabled) {
    logFeedback('Audio is disabled. Click "Enable Sound" first.');
    return;
  }

  mp3Audio.currentTime = 0;
  mp3Audio.play().then(() => {
    logFeedback('MP3 sound is playing!');
  }).catch(err => {
    logFeedback('MP3 failed: ' + err);
  });
});
</script>

</body>
</html>